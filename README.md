# API压测工具 - 大模型版

这是一个专为大模型API设计的压测工具，支持随机问题生成，模拟真实的使用场景。

## 功能特性

- 🚀 高并发异步请求 (支持150并发)
- 📊 详细的性能统计
- ⏱️ 响应时间分析
- 📈 成功率监控
- 🔍 错误详情统计
- 🎯 **随机问题生成** - 内置80个各类问题
- 📋 **多样化问题类型** - 8个分类，模拟真实场景

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 方法1：使用简化版脚本（推荐）

1. **Windows用户**：
   - 双击运行 `run_test.bat`
   - 或在命令行运行：`run_test.bat`

2. **其他系统**：
   - 运行：`python run_test.py`

3. **自定义配置**：
   - 打开 `run_test.py` 文件
   - 修改 `CONFIG` 字典中的参数：
     - `url`：更改目标API地址
     - `headers`：更改请求头
     - `payload`：更改请求参数
     - `concurrent_requests`：调整并发数

### 方法2：直接运行完整脚本

```bash
python api_stress_test.py
```

### 方法3：手动安装依赖

```bash
pip install -r requirements.txt
python api_stress_test.py
```

## 🎯 随机问题库

内置80个精心设计的问题，涵盖8个类别：

1. **knowledge** - 知识问答（AI、科技、科学等）
2. **reasoning** - 逻辑推理（数学题、逻辑题等）
3. **creative** - 创作任务（写作、设计、故事等）
4. **programming** - 编程问题（算法、数据结构等）
5. **mathematics** - 数学计算（几何、代数、统计等）
6. **translation** - 翻译任务（中英文、古文翻译等）
7. **summary** - 分析总结（行业分析、趋势总结等）
8. **advice** - 生活建议（学习、工作、生活指导等）

## 输出说明

压测完成后会显示以下统计信息：

- **总请求数**：发送的请求总数
- **成功请求**：状态码为200的请求数
- **失败请求**：状态码非200的请求数
- **异常请求**：网络异常或超时的请求数
- **成功率**：成功请求的百分比
- **总耗时**：整个压测过程的时间
- **平均QPS**：每秒请求数
- **响应时间统计**：包括平均、最快、最慢、50%、95%、99%分位数
- **🎯 问题类型分布**：各类问题的使用统计

## 注意事项

- 请确保目标API能够承受150并发请求
- 默认请求超时时间为60秒
- 如果需要修改并发数，请在`run_test.py`中调整`concurrent_requests`参数
- 150并发可能对目标服务器造成较大负载，请谨慎使用 